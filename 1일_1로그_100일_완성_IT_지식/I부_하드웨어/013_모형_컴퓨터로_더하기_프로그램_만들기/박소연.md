# 013 모형 컴퓨터로 더하기 프로그램 만들기

물리적으로 존재하지 않는 컴퓨터를 가지고 프로세서가 어떻게 작동하는지 알아보자. 

이 컴퓨터는 이론상으로만 존재하므로, 원하는데로 어떤 방식으로든 설계할 수 있다. 또한 이론 상의 설계를 **모방하여 작동하는** 프로그램을 만들 수 있어 상상의 컴퓨터를 위한 프로그램을 작성하고 어떻게 실행되는지 볼 수 있다. 

이렇게 만들어 낸 컴퓨터를 '모형' 컴퓨터라고 부르려고 한다. 

### 모형 컴퓨터에 대한 설정 
1. 모형 컴퓨터는 1960년대 말에 사용되던 미니 컴퓨터 수준 
2. 명령어와 데이터를 저장하기 위한 메모리가 있고, 한 개의 수를 담을 만한 용량의 부가적인 저장 영역인 **누산기(가장 최근에 입력한 수나 가장 최근의 계산 결과를 가지고 있음)** 가 있음 
3. 약 10개의 명령어 레퍼토리가 있다. 

|명령어|설명|
|---|---|
|GET|키보드에서 수를 입력 받은 후 누산기에 넣는다 (누산기의 기존 내용을 덮어 쓴다)|
|PRINT|누산기의 내용을 출력한다(누산기의 내용은 변하지 않는다)|
|STORE M|누산기 내용의 복사본을 메모리 위치 M에 저장한다(누산기의 내용은 변하지 않는다)|
|LOAD M|메모리 위치 M의 내용을 누산기에 적재한다(M의 내용은 변하지 않는다)|
|ADD M|메모리 위치 M의 내용을 누산기의 내용에 더한다(M의 내용은 변하지 않는다).|
|STOP|실행을 중지한다.|

4. 각 메모리 위치에 한 개의 수 또는 한 개의 명령어가 담겨 있으므로, 프로그램은 메모리에 저장된 일련의 명령어와 데이터 항목으로 구성된다. 작동을 시작하면 프로세서는 다음과 같이 단순한 사이클을 반복한다 
(인출: 메모리에서 다음 명령어를 가져온다. -> 해석: 명령어가 무슨 일을 하는지 알아낸다. -> 실행: 명령어를 실행한다. -> 인출 )

### 첫 번째 모형 프로그램 
1. 일련의 명령어 작성 
2. 메모리에 적재 
3. 프로세서에 그 명령어들을 실행하라고 지시 
하면 프로그램이 실행된다. 

> GET<br>
PRINT<br>
STOP 

을 입력하면 사용자에게 수를 입력받도록 요청 > 그 수를 출력 > 프로세서 중지 의 과정을 진행한다. 

### 두 번째 모형 프로그램 
> GET 첫 번째 수를 입력받아 누산기에 넣는다. <br>
STORE FirstNum FirstNum이라는 메모리 위치에 첫 번째 수를 저장한다. <br>
GET 두 번째 수를 입력받아 누산기에 넣는다. 
ADD FirstNum 첫번째 수를 누산기에 있는 값에 더한다. <br>
PRINT 결과 합계 값을 출력한다. <br>
STOP 프로그램 실행을 중지한다. <br>
FirstNum: 첫번째 입력 수를 담을 메모리 위치

### 분기 명령어 
두 번째 모형 프로그램을 확장해서 세 개의 수를 더하도록 하려면 어떻게 해야할 까 ? 

STORE, GET, ADD 명령어를 한 번 더 추가하면 가능하지만 1000개의 수를 더한다고 했을 때에 해당 방법으로는 한계가 있다. 

해결책은 프로세서의 명령어 레퍼토리에 일련의 명령어를 재사용하게 하는 새로운 종류의 명령어를 추가하는 것이다. 

GOTO 명령어는 바로 다음 명령어가 아니라 GOTO가 지정하는 위치로 이동하여 명령어를 실행하도록 프로세서에 지시한다. 

> Top: GET 수를 입력받아 누산기에 넣는다.<br>
PRINT 수를 출력한다<br>
GOTO Top Top 으로 돌아가서 다른 수를 입력받는다 

하지만 이렇게만 하면 명령어를 재사용할 수는 있지만 반복문이 계속되는 걸 멈출 수 없다. 

이때 조건부 분기 , 조건부 점프를 사용한다. 컴퓨터에는 IFZERO 라는 명령어가 있다. 누산기의 값이 0이면 특정 명령어로 분기하며, 그렇지 않으면 바로 다음 명령어부터 실행을 계속한다. 

> Top: GET 수를 입력받아 누산기에 넣는다<br>
IFZERO Bot 누산기 값이 0이면 Bot 레이블이 붙은 명령어로 이동한다.<br>
PRINT 누산기의 값이 0이 아니므로 그 값을 출력한다.<br>
GOTO Top Top 으로 돌아가서 다른 수를 입력받는다.<br>
Bot: STOP 

### 메모리 내부 표현 
1. 각 명령어가 각자의 숫자형 코드를 저장하는데 메모리 위치를 한개 사용 
2. 명령어가 메모리를 참조하거나 데이터 값을 사용하면 바로 다음 위치도 사용 
한다고 가정하자. 

즉, GET 은 메모리 위치를 한 개 사용하지만, 다른 메모리 위치도 참조하는 IFZERO 와 ADD 같은 명령어를 메모리 두 칸을 차지하고, 두 번째 칸은 참조하는 위치에 해당한다. 

그리고 
3. 어떤 데이터 값이든 한 개의 메모리 위치에 들어간다
4. 명령어의 숫자 값이 다음과 같다고 가정하자 (GET = 1, PRINT = 2, STORE = 3, LOAD = 4, ADD = 5, STOP = 6, GOTO = 7, IFZERO = 8)

|위치|메모리|레이블|명령어|
|---|---|---|---|
|1|1|Top:|GET
|2|8||IFZERO Bot|
|3|10|||
|4|5||ADD Sum|
|5|14|||
|6|3||STORE Sum|
|7|14|||
|8|7||GOTO Top|
|9|1|||
|10|4|Bot:|LOAD Sum|
|11|14|||
|12|2||PRINT|
|13|6||STOP|
|14|0|Sum:|0 [데이터, 0으로 초기화됨]|