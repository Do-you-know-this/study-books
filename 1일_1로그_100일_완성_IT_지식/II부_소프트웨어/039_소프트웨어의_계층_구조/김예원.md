# 2부. 소프트웨어

## 039. 소프트웨어의 계층 구조

- 소프트웨어는 계층으로 구성됨
  - 컴퓨팅 분야의 다른 많은 것과 마찬가지
- 각 계층은 맡은 기능을 구현하고, 그 상위 계층이 서비스에 접근하는 데 사용할 수 있도록 추상화를 제공함
- **하드웨어 -> 운영체제(커널) -> 라이브러리 집합**
- 가장 밑바닥에는 하드웨어가 있음
  - 시스템이 실행 중이더라도 버스를 이용하여 장치를 추가하고 제거할 수 있다는 점을 제외하면 하드웨어는 거의 변경할 수 없음
- 다음 계층은 엄밀한 의미의 운영체제로, 핵심적인 기능임을 암시하기 위해 흔히 커널(kernel)이라고 함
  - 운영체제는 하드웨어와 애플리케이션 사이에 있는 계층임
  - 하드웨어의 종류와 무관하게 운영체제는 하드웨어의 특수한 속성을 숨기고, 애플리케이션에는 특정 하드웨어의 여러 가지 세부 사항과 독립된 인터페이스 또는 외관을 제공함
    - 인터페이스가 잘 설계되어 있으면, 동일한 운영체제 인터페이스를 다양한 종류의 프로세서에서 이용할 수 있고, 여러 공급 업체가 동일한 인터페이스를 제공하기도 함
  - 사실상 운영체제는 원자재가 됐음
    - 밑에 있는 하드웨어는 가격과 성능을 제외하면 크게 문제되지 않고, 위에 있는 소프트웨어는 하드웨어에 독립적으로 작동함
    - 프로그램을 새로운 프로세서로 옮기는 데 필요한 작업은 적합한 컴파일러로 컴파일하는 일뿐임
      - 물론 프로그램이 특정 하드웨어 속성에 더 단단히 결부돼 있을수록 이 작업은 더 어려워지겠지만, 많은 프로그램에 충분히 실행 가능함
      - ex) 애플이 2005~2006년 사이 1년도 안 되는 기간에 자사 소프트웨어를 IBM 파워PC(PowerPC) 프로세서 기반에서 인텔 프로세서 기반으로 변환했음
        - -> 소프트웨어가 특정 프로세서 아키텍처에 대체로 독립적이라는 점을 다시금 보여줌
      - 윈도우는 이야기가 조금 다름 ex) 1878년 인텔 8086 프로세서를 시작으로 많은 발전 단계에 걸쳐 다년간 인텔 아키텍처와 상당히 밀접하게 결부된 상태였음
        - -> 그 연관성이 너무 강해서 인텔 프로세서에서 실행되는 윈도우는 가끔 '윈텔(Wintel)'이라고 불릴 정도였음
        - -> 그렇지만 요즘은 윈도우도 ARM 프로세서상에서 실행됨
- 운영체제 다음 계층은 라이브러리 집합으로, 프로그래머 개개인이 기능을 새로 만들어 낼 필요가 없도록 일반적으로 유용한 서비스를 제공함
  - 라이브러리는 API를 통해 사용할 수 있음
  - 라이브러리에는 낮은 수준으로, 기본적인 기능을 처리하는 라이브러리(1)와 그보다 훨씬 더 복잡한 GUI 구성요소 라이브러리(2)가 있음
    - 1) 제곱근이나 로그 같은 수학적인 기능 계산, date 명령어가 처리하는 날짜와 시간 계산
    - 2) GUI(그래픽 사용자 인터페이스) 구성 요소: 대화 상자, 메뉴, 버튼, 체크박스, 스크롤 바, 탭이 있는 분할된 창
      - GUI 구성 요소가 라이브러리에 있으면 누구나 사용할 수 있어서 균일한 디자인을 보장하는 데 도움이 됨
- 가끔은 커널, 라이브러리, 애플리케이션 간의 구분이 앞서 이야기했던 것처럼 명확하지 않음
  - 소프트웨어 구성 요소를 만들고 연결하는 방법에는 경우의 수가 많기 때문
- 계층의 경계선을 구분할 때 유용한 지침
  - 어떤 애플리케이션이 다른 애플리케이션의 동작에 간섭하지 않도록 하는 데 필요한 것은 무엇이든 운영체제의 역할에 속함
    - 메모리 관리, 즉 프로그램이 실행되는 동안 RAM의 어느 위치에 프로그램을 둘지 결정하는 일은 운영체제의 일임
    - 이와 비슷하게, 보조 기억 장치의 어느 위치에 정보를 저장할지 결정하는 파일 시스템은 매우 중요한 기능임
    - 주변 제어 장치도 마찬가지임
    - 위 역할을 수행하면서 프로세서를 제어하는 일은 운영체제의 기능인데, 나머지 모두 잘 작동하도록 보장하는 데 필요한 일이기 때문
  - 브라우저는 운영체제의 일부가 아님
    - 왜냐하면 어떤 브라우저든 공유된 자원이나 제어 기능에 간섭하지 않으면서 하나 또는 여러 개가 동시에 실행될 수 있기 때문
    - 미국 법무부 대 마이크로소프트 간의 반독점 소소음 부분적으로는 마이크로소프트의 브라우저 IE(인터넷 익스플로러)가 운영체제의 일부인지 단지 애플리케이션인지 다툰 논쟁이었음
    - 마이크로소프트가 주장한 대로 IE가 운영체제의 일부라면 제거될 수 없는 것이 타당했고, 마이크로소프트는 IE의 사용을 요구할 권리가 있음
      - 하지만 IE가 그냥 애플리케이션이라면 굳이 IE를 쓸 필요가 없는 이들에게 불법적으로 강요하는 상황이 됨
    - 법정은 브라우저가 운영체제의 일부가 아니라 애플리케이션이라고 판결 내림
